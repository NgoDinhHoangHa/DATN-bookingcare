"use strict";var UnoverlayVue=(()=>{var $=Object.create;var x=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var c=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,o)=>(typeof require!="undefined"?require:e)[o]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var J=(r,e)=>{for(var o in e)x(r,o,{get:e[o],enumerable:!0})},F=(r,e,o,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of q(e))!B.call(r,i)&&i!==o&&x(r,i,{get:()=>e[i],enumerable:!(t=L(e,i))||t.enumerable});return r};var Q=(r,e,o)=>(o=r!=null?$(z(r)):{},F(e||!r||!r.__esModule?x(o,"default",{value:r,enumerable:!0}):o,r)),W=r=>F(x({},"__esModule",{value:!0}),r);var oe={};J(oe,{UnifiedOverlayProvider:()=>U,createOverlay:()=>g,default:()=>re,install:()=>D,renderOverlay:()=>S,useInjectHolder:()=>K,useOverlayMeta:()=>_});var v={appContext:null},d=Symbol("__imperative_overlay_key");var s=c("vue-demi"),E=c("@vueuse/core");var w="unified-overlay";function V(r="",e=document.body){let o=document.createElement("div");return r&&(o.id=r),e.appendChild(o),o}function P(){}function M(){throw new Error("overlay - Error: It is not allowed to call confirm and cancel externally immediately, please wait for the component to render")}function k(r){return new Promise(e=>setTimeout(e,r))}function y(r=w,e=!0){return e?`${r}--${y.index++}`:r}y.index=1;function X(){let r,e;return{promise:new Promise((t,i)=>{r=t,e=i}),reject:e,resolve:r}}function O(){let r=X();return r.promise.confirm=M,r.promise.cancel=M,r}function _(r={}){let{animation:e=0,immediate:o=!0,model:t="visible",automatic:i=!0}=r,n=(0,s.inject)(d,Y(t,r));return!n.isTemplate&&i&&(0,s.watch)(n.visible,async()=>{var p;n.visible.value||(e>0&&await k(e),(p=n.vanish)==null||p.call(n))}),o&&(0,s.onMounted)(()=>n.visible.value=!0),(0,s.provide)(d,null),n}function Y(r,e={}){let o=(0,s.getCurrentInstance)(),t=e.event||{},i=o?(0,E.useVModel)(o.props,r):(0,s.ref)(!1);return{cancel:a=>{i.value=!1,o==null||o.emit(t.cancel||"cancel",a)},confirm:a=>{i.value=!1,o==null||o.emit(t.confirm||"confirm",a)},vanish:P,visible:i,isTemplate:!0}}function C(r,e){function o(n){var p,a;(p=e.promiser)==null||p.reject(n),(a=e.events)==null||a.emit("cancel",n),r.value=!1}function t(n){var p,a;(p=e.promiser)==null||p.resolve(n),(a=e.events)==null||a.emit("confirm",n),r.value=!1}function i(){var n,p;(n=e.vanish)==null||n.call(e),(p=e.promiser)==null||p.reject()}return e.promiser&&(e.promiser.promise.confirm=t,e.promiser.promise.cancel=o),{visible:r,confirm:t,cancel:o,vanish:i}}var m=c("vue-demi"),H=Q(c("mitt"));var f=c("vue-demi"),A=c("pascal-case");var b=c("vue-demi");function T(r,e){function o(){return(0,b.h)(r,e.props)}return(0,b.defineComponent)({name:e.name,setup:e.setup,render:e.render===!1?void 0:e.render||o})}function N(r,e,o={}){var u,j;let t=y(o.id,o.autoIncrement);function i(){p.unmount(),l.remove()}let n=(0,f.defineComponent)({name:(0,A.pascalCase)(t),setup(){var R;(R=o.setup)==null||R.call(o)},render(){return(0,f.h)(r,e)}}),p=(0,f.createApp)(n),a=((u=o.appContext)==null?void 0:u.app)||((j=v.appContext)==null?void 0:j.app);if(a){p.config.globalProperties=a.config.globalProperties;let{reload:R,...G}=a._context;Object.assign(p._context,G)}let l=V(t,o.root||document.body);return p.mount(l),{vanish:i}}function K(r,e={}){let{callback:o,scripts:t,props:i,refresh:n}=Z(),p=y(e.id,e.autoIncrement);function a(){return(0,m.h)(m.Teleport,{to:e.root||document.body,disabled:e.root===!1},[(0,m.h)("div",{id:p},[(0,m.h)(r,i.value)])])}let l=T(r,{render:!1,setup(){return(0,m.provide)(d,t),()=>n.value?a():null}});return[o,l]}function Z(){let r=(0,m.ref)(!1),e=(0,m.ref)(!1),o=(0,H.default)(),t=(0,m.ref)(),i=(0,m.reactive)({events:o,vanish:p}),n=C(r,i);function p(){e.value=!1,t.value={},o.off("*")}async function a(l){t.value=l,e.value=!0,await(0,m.nextTick)(),r.value=!0;let u=O();return Object.assign(i,{promiser:u}),u.promise}return{callback:a,scripts:n,props:t,refresh:e}}var h=c("vue-demi");function g(r){function e(t,i,n){let p={vanish:P};function a(){let l=(0,h.ref)(!1),u=C(l,Object.assign(p,{promiser:i}));(0,h.provide)(d,u)}p.vanish=N(r,t,{...n,setup:a}).vanish}function o(t,i){let n=O();return e(t,n,i),n.promise}return o}function S(r,e={}){return g(r)(e.props,e)}var I=c("vue-demi");var U=(0,I.defineComponent)({setup(r,{slots:e}){let{appContext:o}=(0,I.getCurrentInstance)();return v.appContext=o,()=>{var t;return(t=e.default)==null?void 0:t.call(e)}}});var D=r=>{v.appContext=r._context},ee={install:D};var re=ee;return W(oe);})();
//# sourceMappingURL=index.iife.min.js.map
