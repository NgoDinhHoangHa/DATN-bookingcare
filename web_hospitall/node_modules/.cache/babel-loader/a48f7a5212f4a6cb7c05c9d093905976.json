{"remainingRequest":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\src\\components\\user\\components\\ChatPopup\\ChatPopupContainer.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\src\\components\\user\\components\\ChatPopup\\ChatPopupContainer.vue","mtime":1696609026832},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\babel.config.js","mtime":1696609011972},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696609014128},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js","mtime":1696609013865},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696609014128},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1696609025699}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL09TL09uZURyaXZlIC0gVW5pdmVyc2l0eSBvZiBUZWNobm9sb2d5IGFuZCBFZHVjYXRpb24vRGVza3RvcC9EQVROLWJvb2tpbmdjYXJlL3dlYl9ob3NwaXRhbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkM6L1VzZXJzL09TL09uZURyaXZlIC0gVW5pdmVyc2l0eSBvZiBUZWNobm9sb2d5IGFuZCBFZHVjYXRpb24vRGVza3RvcC9EQVROLWJvb2tpbmdjYXJlL3dlYl9ob3NwaXRhbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvT1MvT25lRHJpdmUgLSBVbml2ZXJzaXR5IG9mIFRlY2hub2xvZ3kgYW5kIEVkdWNhdGlvbi9EZXNrdG9wL0RBVE4tYm9va2luZ2NhcmUvd2ViX2hvc3BpdGFsbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IENoYXRQb3B1cEZvcm0gZnJvbSAnLi9DaGF0UG9wdXBGb3JtLnZ1ZSc7CmltcG9ydCBDaGF0UG9wdXBDb250ZW50IGZyb20gJy4uLy4uLy4uL0NoYXRQb3B1cENvbnRlbnQudnVlJzsKaW1wb3J0IENoYXRQb3B1cFdhdGluZyBmcm9tICcuL0NoYXRQb3B1cFdhdGluZy52dWUnOwppbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnOwppbXBvcnQgUmVxdWVzdCBmcm9tICcuLi8uLi8uLi8uLi9SZXF1ZXN0JzsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IENoYXRQb3B1cERlbnkgZnJvbSAnLi9DaGF0UG9wdXBEZW55LnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJpc1Nob3ciLCAic2V0SXNTaG93Il0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlkOiB2NCgpLAogICAgICBpc0xvZ2luOiAwLAogICAgICBpc1N1Y2Nlc3M6IGZhbHNlLAogICAgICBkYXRhOiBudWxsLAogICAgICBkb2N0b3I6IG51bGwsCiAgICAgIG1lc3NhZ2VzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZShbJ3NvY2tldCddKSksCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZUNsb3NlKCkgewogICAgICB0aGlzLnNldElzU2hvdyhmYWxzZSk7CiAgICB9LAogICAgc2V0RG9jdG9yOiBmdW5jdGlvbiBzZXREb2N0b3IoZG9jdG9yKSB7CiAgICAgIHRoaXMuZG9jdG9yID0gZG9jdG9yOwogICAgfSwKICAgIHNldElzTG9naW46IGZ1bmN0aW9uIHNldElzTG9naW4oaXNMb2dpbikgewogICAgICB0aGlzLmlzTG9naW4gPSBpc0xvZ2luOwogICAgfSwKICAgIHNldERhdGE6IGZ1bmN0aW9uIHNldERhdGEoZGF0YSkgewogICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgfSwKICAgIHNldE1lc3NhZ2U6IGZ1bmN0aW9uIHNldE1lc3NhZ2UobWVzc2FnZSkgewogICAgICB0aGlzLm1lc3NhZ2VzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLm1lc3NhZ2VzKSwgW21lc3NhZ2VdKTsKICAgIH0sCiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NlbmRNZXNzYWdlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKG1lc3NhZ2UpIHsKICAgICAgICB2YXIgX3RoaXMkZGF0YSwgX3RoaXMkZGF0YSRncm91cENoYXQsIF90aGlzJGRhdGEyLCBfdGhpcyRkb2N0b3IsIF90aGlzJGRvY3RvcjIsIHJlc3VsdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBSZXF1ZXN0LlBvc3QoJy9jaGF0cycsIHsKICAgICAgICAgICAgICAgICAgaWRncm91cGNoYXQ6IChfdGhpcyRkYXRhID0gdGhpcy5kYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkZGF0YSRncm91cENoYXQgPSBfdGhpcyRkYXRhLmdyb3VwQ2hhdCkgPT09IG51bGwgfHwgX3RoaXMkZGF0YSRncm91cENoYXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGRhdGEkZ3JvdXBDaGF0LmlkLAogICAgICAgICAgICAgICAgICBjb250ZW50X2NoYXQ6IG1lc3NhZ2UuY29udGVudF9jaGF0LAogICAgICAgICAgICAgICAgICBpc191c2VyOiAoX3RoaXMkZGF0YTIgPSB0aGlzLmRhdGEpID09PSBudWxsIHx8IF90aGlzJGRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRkYXRhMi51c2VyUywKICAgICAgICAgICAgICAgICAgaWRhZG1pbjogKF90aGlzJGRvY3RvciA9IHRoaXMuZG9jdG9yKSA9PT0gbnVsbCB8fCBfdGhpcyRkb2N0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGRvY3Rvci5pZGFkbWluLAogICAgICAgICAgICAgICAgICB0eXBlX2NoYXQ6IDEKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEuZGF0YS5faWQgPSAoX3RoaXMkZG9jdG9yMiA9IHRoaXMuZG9jdG9yKSA9PT0gbnVsbCB8fCBfdGhpcyRkb2N0b3IyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRkb2N0b3IyLmlkYWRtaW47CiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCdjaGF0TWVzc2FnZScsIHJlc3VsdC5kYXRhLmRhdGEpOwogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5tZXNzYWdlcyksIFtyZXN1bHQuZGF0YS5kYXRhXSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1swLCA5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzZW5kTWVzc2FnZShfeCkgewogICAgICAgIHJldHVybiBfc2VuZE1lc3NhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNlbmRNZXNzYWdlOwogICAgfSgpCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDaGF0UG9wdXBGb3JtOiBDaGF0UG9wdXBGb3JtLAogICAgQ2hhdFBvcHVwQ29udGVudDogQ2hhdFBvcHVwQ29udGVudCwKICAgIENoYXRQb3B1cFdhdGluZzogQ2hhdFBvcHVwV2F0aW5nLAogICAgQ2hhdFBvcHVwRGVueTogQ2hhdFBvcHVwRGVueQogIH0KfTs="},{"version":3,"mappings":";;;;;AAeA,OAAOA,aAAP,MAA0B,qBAA1B;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,SAASC,EAAT,QAAmB,MAAnB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,eAAe;EACXC,KAAK,EAAE,CAAC,QAAD,EAAW,WAAX,CADI;EAEXC,IAFW,kBAEJ;IACH,OAAO;MACHC,EAAE,EAAEN,EAAE,EADH;MAEHO,OAAO,EAAE,CAFN;MAGHC,SAAS,EAAE,KAHR;MAIHH,IAAI,EAAE,IAJH;MAKHI,MAAM,EAAE,IALL;MAMHC,QAAQ,EAAE;IANP,CAAP;EAQH,CAXU;EAYXC,QAAQ,oBACDT,QAAQ,CAAC,CAAC,QAAD,CAAD,CADP,CAZG;EAeXU,OAAO,EAAE;IACLC,WAAW,EAAE,uBAAY;MACrB,KAAKC,SAAL,CAAe,KAAf;IACH,CAHI;IAILC,SAAS,EAAE,mBAAUN,MAAV,EAAkB;MACzB,KAAKA,MAAL,GAAcA,MAAd;IACH,CANI;IAOLO,UAAU,EAAE,oBAAUT,OAAV,EAAmB;MAC3B,KAAKA,OAAL,GAAeA,OAAf;IACH,CATI;IAULU,OAAO,EAAE,iBAAUZ,IAAV,EAAgB;MACrB,KAAKA,IAAL,GAAYA,IAAZ;IACH,CAZI;IAaLa,UAAU,EAAE,oBAAUC,OAAV,EAAmB;MAC3B,KAAKT,QAAL,gCAAoB,KAAKA,QAAzB,IAAmCS,OAAnC;IACH,CAfI;IAgBLC,WAAW;MAAA,2EAAE,iBAAgBD,OAAhB;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEgBlB,OAAO,CAACoB,IAAR,CAAa,QAAb,EAAuB;kBACxCC,WAAW,gBAAE,KAAKjB,IAAP,uEAAE,WAAWkB,SAAb,yDAAE,qBAAsBjB,EADK;kBAExCkB,YAAY,EAAEL,OAAO,CAACK,YAFkB;kBAGxCC,OAAO,iBAAE,KAAKpB,IAAP,gDAAE,YAAWqB,KAHoB;kBAIxCC,OAAO,kBAAE,KAAKlB,MAAP,iDAAE,aAAakB,OAJkB;kBAKxCC,SAAS,EAAE;gBAL6B,CAAvB,CAFhB;;cAAA;gBAECC,MAFD;gBASLA,MAAM,CAACxB,IAAP,CAAYA,IAAZ,CAAiByB,GAAjB,oBAAuB,KAAKrB,MAA5B,kDAAuB,cAAakB,OAApC;gBACA,KAAKI,MAAL,CAAYC,IAAZ,CAAiB,aAAjB,EAAgCH,MAAM,CAACxB,IAAP,CAAYA,IAA5C;gBACA,KAAKK,QAAL,gCAAoB,KAAKA,QAAzB,IAAmCmB,MAAM,CAACxB,IAAP,CAAYA,IAA/C;gBAXK;gBAAA;;cAAA;gBAAA;gBAAA;gBAaL4B,OAAO,CAACC,GAAR;;cAbK;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAAF;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAhBN,CAfE;EAgDXC,UAAU,EAAE;IAAEtC,aAAa,EAAbA,aAAF;IAAiBC,gBAAgB,EAAhBA,gBAAjB;IAAmCC,eAAe,EAAfA,eAAnC;IAAoDI,aAAY,EAAZA;EAApD;AAhDD,CAAf","names":["ChatPopupForm","ChatPopupContent","ChatPopupWating","v4","Request","mapState","ChatPopupDeny","props","data","id","isLogin","isSuccess","doctor","messages","computed","methods","handleClose","setIsShow","setDoctor","setIsLogin","setData","setMessage","message","sendMessage","Post","idgroupchat","groupChat","content_chat","is_user","userS","idadmin","type_chat","result","_id","socket","emit","console","log","components"],"sourceRoot":"","sources":["C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\src\\components\\user\\components\\ChatPopup\\ChatPopupContainer.vue"],"sourcesContent":["<template>\r\n    <div class=\"chat-popup__form\" :class=\"isShow ? 'active' : ''\">\r\n        <p class=\"chat-popup__form--title\">\r\n            {{ isLogin === 1 ? 'Hổ trợ trực tuyến' : isLogin === 2 ? doctor?.name : 'Nhập thông tin' }}\r\n        </p>\r\n        <div @click=\"handleClose\" class=\"chat-popup__form--close bx bx-x\"></div>\r\n        <ChatPopupForm v-if=\"isLogin === 0\" :isLogin=\"isLogin\" :setIsLogin=\"setIsLogin\" :setDoctor=\"setDoctor\"\r\n            :id=\"id\" />\r\n        <ChatPopupWating v-if=\"isLogin === 1\" :setIsLogin=\"setIsLogin\" :doctor=\"doctor\" :id=\"id\" :setData=\"setData\" />\r\n        <ChatPopupContent v-if=\"isLogin === 2\" :setIsLogin=\"setIsLogin\" :messages=\"messages\" :sendMessage=\"sendMessage\"\r\n            :id=\"doctor?.idadmin\" :doctor=\"doctor\" :groupChat=\"data.groupChat\" :_id=\"id\" :setMessage=\"setMessage\" />\r\n        <ChatPopupDeny v-if=\"isLogin === 3\" :setIsLogin=\"setIsLogin\" />\r\n    </div>\r\n</template>\r\n<script>\r\nimport ChatPopupForm from './ChatPopupForm.vue';\r\nimport ChatPopupContent from '../../../ChatPopupContent.vue';\r\nimport ChatPopupWating from './ChatPopupWating.vue';\r\nimport { v4 } from 'uuid';\r\nimport Request from '../../../../Request';\r\nimport { mapState } from 'vuex';\r\nimport ChatPopupDeny from './ChatPopupDeny.vue';\r\nexport default {\r\n    props: [\"isShow\", \"setIsShow\"],\r\n    data() {\r\n        return {\r\n            id: v4(),\r\n            isLogin: 0,\r\n            isSuccess: false,\r\n            data: null,\r\n            doctor: null,\r\n            messages: []\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState(['socket'])\r\n    },\r\n    methods: {\r\n        handleClose: function () {\r\n            this.setIsShow(false);\r\n        },\r\n        setDoctor: function (doctor) {\r\n            this.doctor = doctor;\r\n        },\r\n        setIsLogin: function (isLogin) {\r\n            this.isLogin = isLogin;\r\n        },\r\n        setData: function (data) {\r\n            this.data = data;\r\n        },\r\n        setMessage: function (message) {\r\n            this.messages = [...this.messages, message];\r\n        },\r\n        sendMessage: async function (message) {\r\n            try {\r\n                const result = await Request.Post('/chats', {\r\n                    idgroupchat: this.data?.groupChat?.id,\r\n                    content_chat: message.content_chat,\r\n                    is_user: this.data?.userS,\r\n                    idadmin: this.doctor?.idadmin,\r\n                    type_chat: 1,\r\n                });\r\n                result.data.data._id = this.doctor?.idadmin;\r\n                this.socket.emit('chatMessage', result.data.data);\r\n                this.messages = [...this.messages, result.data.data];\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    },\r\n    components: { ChatPopupForm, ChatPopupContent, ChatPopupWating, ChatPopupDeny }\r\n}\r\n</script>"]}]}