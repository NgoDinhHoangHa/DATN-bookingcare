{"remainingRequest":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\src\\components\\ChatPopupContent.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\src\\components\\ChatPopupContent.vue","mtime":1696609026800},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\babel.config.js","mtime":1696609011972},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696609014128},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js","mtime":1696609013865},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696609014128},{"path":"C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1696609025699}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvT1MvT25lRHJpdmUgLSBVbml2ZXJzaXR5IG9mIFRlY2hub2xvZ3kgYW5kIEVkdWNhdGlvbi9EZXNrdG9wL0RBVE4tYm9va2luZ2NhcmUvd2ViX2hvc3BpdGFsbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgVVJMX0lNQUdFIH0gZnJvbSAnLi4vQ29uZmlnJzsKbW9tZW50LmxvY2FsZSgiVkkiKTsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ21lc3NhZ2VzJywgJ3NlbmRNZXNzYWdlJywgJ2lkYWRtaW4nLCAnaWQnLCAnZG9jdG9yJywgJ3NldE1lc3NhZ2UnLCAnZ3JvdXBDaGF0JywgJ19pZCddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgY29udGVudDogJycsCiAgICAgIG1vbWVudDogbW9tZW50LAogICAgICB1cmxJbWFnZTogVVJMX0lNQUdFCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsnc29ja2V0J10pKSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVJbnB1dFNlbmRNZXNzYWdlOiBmdW5jdGlvbiBoYW5kbGVJbnB1dFNlbmRNZXNzYWdlKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgewogICAgICAgIHRoaXMuaGFuZGxlU2VuZE1lc3NhZ2UoKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNlbmRNZXNzYWdlOiBmdW5jdGlvbiBoYW5kbGVTZW5kTWVzc2FnZSgpIHsKICAgICAgaWYgKHRoaXMuY29udGVudC5sZW5ndGggIT09IDApIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoewogICAgICAgICAgY29udGVudF9jaGF0OiB0aGlzLmNvbnRlbnQsCiAgICAgICAgICBpZGFkbWluOiB0aGlzLmlkCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5jb250ZW50ID0gJyc7CiAgICAgIH0KICAgIH0sCiAgICBvbklucHV0OiBmdW5jdGlvbiBvbklucHV0KGV2ZW50KSB7CiAgICAgIHRoaXMuY29udGVudCA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgIH0sCiAgICB1cGRhdGVGb3JtYXRUaW1lOiBmdW5jdGlvbiB1cGRhdGVGb3JtYXRUaW1lKGQpIHsKICAgICAgdmFyIGNoZWNrTnVtYmVyID0gZnVuY3Rpb24gY2hlY2tOdW1iZXIobnVtYmVyKSB7CiAgICAgICAgcmV0dXJuIG51bWJlciA8IDEwID8gIjAiLmNvbmNhdChudW1iZXIpIDogbnVtYmVyOwogICAgICB9OwoKICAgICAgcmV0dXJuIGNoZWNrTnVtYmVyKGQuZ2V0RGF0ZSgpKSArICItIiArIGNoZWNrTnVtYmVyKGQuZ2V0TW9udGgoKSArIDEpICsgIi0iICsgZC5nZXRGdWxsWWVhcigpICsgIiAiICsgY2hlY2tOdW1iZXIoZC5nZXRIb3VycygpKSArICI6IiArIGNoZWNrTnVtYmVyKGQuZ2V0TWludXRlcygpKTsKICAgIH0sCiAgICBzb2NrZXRPbjogZnVuY3Rpb24gc29ja2V0T24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0cnkgewogICAgICAgIHZhciBfdGhpcyRncm91cENoYXQ7CgogICAgICAgIHRoaXMuc29ja2V0Lm9uKCJfY2hhdE1lc3NhZ2UuIi5jb25jYXQoKF90aGlzJGdyb3VwQ2hhdCA9IHRoaXMuZ3JvdXBDaGF0KSA9PT0gbnVsbCB8fCBfdGhpcyRncm91cENoYXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGdyb3VwQ2hhdC5pZCwgIi4iKS5jb25jYXQodGhpcy5faWQpLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgY29uc29sZS5sb2coJ25oYW4gcm9pIG5lJyk7CgogICAgICAgICAgX3RoaXMuc2V0TWVzc2FnZShkYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBhbGVydChlcnJvcik7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBncm91cENoYXQ6IGZ1bmN0aW9uIGdyb3VwQ2hhdCgpIHsKICAgICAgdGhpcy5zb2NrZXRPbigpOwogICAgfSwKICAgIF9pZDogZnVuY3Rpb24gX2lkKCkgewogICAgICB0aGlzLnNvY2tldE9uKCk7CiAgICB9LAogICAgbWVzc2FnZXM6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICBpZiAodGhpcy4kcmVmcy5jb250YWluZXJNZXNzYWdlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRyZWZzLmNvbnRhaW5lck1lc3NhZ2Uuc2Nyb2xsSGVpZ2h0KTsKICAgICAgICAgIHRoaXMuJHJlZnMuY29udGFpbmVyTWVzc2FnZS5zY3JvbGxUb3AgPSB0aGlzLiRyZWZzLmNvbnRhaW5lck1lc3NhZ2Uuc2Nyb2xsSGVpZ2h0OwogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5zb2NrZXRPbigpOwoKICAgIGlmICh0aGlzLiRyZWZzLmNvbnRhaW5lck1lc3NhZ2UpIHsKICAgICAgY29uc29sZS5sb2codGhpcy4kcmVmcy5jb250YWluZXJNZXNzYWdlLnNjcm9sbEhlaWdodCk7CiAgICAgIHRoaXMuJHJlZnMuY29udGFpbmVyTWVzc2FnZS5zY3JvbGxUb3AgPSB0aGlzLiRyZWZzLmNvbnRhaW5lck1lc3NhZ2Uuc2Nyb2xsSGVpZ2h0OwogICAgfQogIH0KfTs="},{"version":3,"mappings":"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","names":["mapState","moment","URL_IMAGE","locale","props","data","loading","content","urlImage","computed","methods","handleInputSendMessage","event","keyCode","handleSendMessage","length","sendMessage","content_chat","idadmin","id","onInput","target","value","updateFormatTime","d","checkNumber","number","getDate","getMonth","getFullYear","getHours","getMinutes","socketOn","socket","on","groupChat","_id","console","log","setMessage","error","alert","watch","messages","handler","$refs","containerMessage","scrollHeight","scrollTop","immediate","mounted"],"sourceRoot":"","sources":["C:\\Users\\OS\\OneDrive - University of Technology and Education\\Desktop\\DATN-bookingcare\\web_hospitall\\src\\components\\ChatPopupContent.vue"],"sourcesContent":["<template>\r\n    <div class=\"chat__right--content--content\" ref=\"containerMessage\">\r\n        <div v-if=\"messages?.length\">\r\n            <div v-for=\"message in messages\" :key=\"message.id\">\r\n                <div v-if=\"message.is_user == id\" class=\"message__item flex-start\">\r\n                    <div class=\"message__item--image\">\r\n                        <img :src=\"urlImage + (message.is_user == id ? 'user-vector.jpeg' : 'doctor-vector.webp')\"\r\n                            alt=\"\">\r\n                        <span></span>\r\n                    </div>\r\n                    <div class=\"message__item--content\">\r\n                        <p>{{ message.content_chat }}</p>\r\n                        <span>\r\n                            {{ moment(message.created_at_main).fromNow() }}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div v-else class=\"message__item flex-end\">\r\n                    <div class=\"message__item--content\">\r\n                        <p>{{ message.content_chat }}</p>\r\n                        <span>\r\n                            {{ moment(message.created_at_main).fromNow() }}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div v-else class=\"loading__content\"\r\n            style=\"text-align: center;padding:0rem 2rem;font-size: 1.3rem;font-weight: 600;\">\r\n            Bây giờ bạn có thể trò chuyện với bác sĩ\r\n        </div>\r\n    </div>\r\n    <div class=\"chat__right--content--control\">\r\n        <input v-if=\"loading\" type=\"text\" placeholder=\"Search\" :value=\"content\" disabled>\r\n        <input v-else type=\"text\" @keydown=\"handleInputSendMessage($event)\" @input=\"onInput($event)\" :value=\"content\"\r\n            placeholder=\"Search\">\r\n        <span v-if=\"content.length !== 0\" @click=\"handleSendMessage\"\r\n            :class=\"loading ? 'bx bx-loader loading' : 'bx bx-send'\"></span>\r\n        <span v-else class=\"bx bx-send disabled\"></span>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport moment from 'moment';\r\nimport { URL_IMAGE } from '../Config';\r\n\r\nmoment.locale(\"VI\");\r\n\r\nexport default {\r\n    props: ['messages', 'sendMessage', 'idadmin', 'id', 'doctor', 'setMessage', 'groupChat', '_id'],\r\n    data() {\r\n        return {\r\n            loading: false,\r\n            content: '',\r\n            moment: moment,\r\n            urlImage: URL_IMAGE\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState(['socket'])\r\n    },\r\n    methods: {\r\n        handleInputSendMessage: function (event) {\r\n            if (event.keyCode === 13) {\r\n                this.handleSendMessage();\r\n            }\r\n        },\r\n        handleSendMessage: function () {\r\n            if (this.content.length !== 0) {\r\n                this.loading = true;\r\n                this.sendMessage({ content_chat: this.content, idadmin: this.id });\r\n                this.loading = false;\r\n                this.content = '';\r\n            }\r\n        },\r\n        onInput: function (event) {\r\n            this.content = event.target.value\r\n        },\r\n        updateFormatTime: function (d) {\r\n            const checkNumber = (number) => number < 10 ? `0${number}` : number;\r\n            return checkNumber(d.getDate()) + \"-\" + checkNumber((d.getMonth() + 1)) + \"-\" + d.getFullYear() + \" \" +\r\n                checkNumber(d.getHours()) + \":\" + checkNumber(d.getMinutes())\r\n        },\r\n        socketOn: function () {\r\n            try {\r\n                this.socket.on(`_chatMessage.${this.groupChat?.id}.${this._id}`, (data) => {\r\n                    console.log('nhan roi ne');\r\n                    this.setMessage(data);\r\n                })\r\n            } catch (error) {\r\n                alert(error);\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        groupChat: function () {\r\n            this.socketOn();\r\n        },\r\n        _id: function () {\r\n            this.socketOn();\r\n        },\r\n        messages: {\r\n            handler() {\r\n                if (this.$refs.containerMessage) {\r\n                    console.log(this.$refs.containerMessage.scrollHeight);\r\n                    this.$refs.containerMessage.scrollTop = this.$refs.containerMessage.scrollHeight;\r\n                }\r\n            },\r\n            immediate: true\r\n        }\r\n    },\r\n    mounted() {\r\n        this.socketOn();\r\n        if (this.$refs.containerMessage) {\r\n            console.log(this.$refs.containerMessage.scrollHeight);\r\n            this.$refs.containerMessage.scrollTop = this.$refs.containerMessage.scrollHeight;\r\n        }\r\n    }\r\n}\r\n</script>"]}]}